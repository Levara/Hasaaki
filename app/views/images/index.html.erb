<div class="row-fluid">
  <h1>Gallery</h1>
  <p>
  Images: <%= @images.count %>
  </p>


</div>


<!-- 
<div class="row-fluid">
<h2>Paths</h2>
  <% unless @images.empty? %>
    <% @images.each do |image| %>
      <p><%= image.original_path %><br />
      <%= image.optimized_path %></p>
    <% end %>
  <% end %>
</div>
--!>


<div class="row-fluid">
<h2>Pictures</h2>
  <ul class="thumbnails files">
    <% unless @images.empty? %>
      <% @images.each do |image| %>
        <li class="span3" id="image_<%= image.id %>">
          <div class="thumbnail">
            <% if image.optimized > 0 %>
              <p> <span class="label label-success">Optimized</span>
              Ratio: <%= (image.original_size.to_f - image.optimized_size.to_f) / image.original_size * 100 unless image.optimized_size.nil?   %></p>
            <% else %>
              <p> <span class="label label-important">Not optimized</span> </p>
            <% end %>
            <% path = image.optimized_path ? image.optimized_path : image.original_path %>
            <%= image_tag(path)  %>
            <div class="caption">
              <p style="text-align: center;">
              <%= path %>

              <%#= link_to "Edit picture", "#" %>

              <%#=
              link_to "Delete picture", pic,
              :data => { :confirm => "Are you sure?" },
              :method => :delete
              %>
              </p>

              <p>
              <%= link_to 'Optimize', optimize_jpeg_path(image), :class => 'btn btn-mini' %>
              <%= link_to 'Show', image_path(image), :class => 'btn btn-mini btn-success' %>
              <%= link_to 'Revert', revert_image_path(image), :class => 'btn btn-mini btn-warning' %>
              </p>

            </div>
          </div>
        </li>
      <% end %>
    <% end %>
  </ul>
</div>

